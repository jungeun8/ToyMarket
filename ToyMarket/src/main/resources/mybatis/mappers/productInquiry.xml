<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="productInquiry">

	<select id="getInquiryListByProductNo" parameterType="int" resultType="com.toymarket.dto.ProductInquiryDto">
		SELECT
			I.inquiry_no 						as no,
			I.inquiry_title 					as title,
			I.inquiry_content 					as content,
			I.inquiry_reply_content 			as replyContent,
			I.inquiry_status 					as status,
			I.inquiry_created_date 				as createdDate,
			I.inquiry_reply_created_date 		as replyCreatedDate,
			I.product_no 						as productNo,
			I.customer_no 						as customerNo,
<!-- 			replace(C.customer_name, SUBSTR(C.customer_name, 2, 1), '*') as customerName, -->
			C.customer_name 					as customerName, 
			I.inquiry_secret_yn 				as secretYN
		FROM
			toy_product_inquiry I, toy_customer C
		WHERE
			I.customer_no = C.customer_no
		AND
			product_no = #{value}
		ORDER BY
			inquiry_no DESC
	</select>

	<insert id="insertInquiry" parameterType="com.toymarket.vo.ProductInquiry">
		INSERT INTO toy_product_inquiry(
			inquiry_no, inquiry_title, inquiry_content, product_no, customer_no
		)
		VALUES (
			product_inquiry_seq.nextval, #{title}, #{content}, #{productNo}, #{customerNo}
		)
	</insert>
	
</mapper>